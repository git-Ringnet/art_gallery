# ğŸ” HÆ°á»›ng dáº«n Search & Filter - Trang BÃ¡n HÃ ng

## âœ¨ TÃ­nh nÄƒng Ä‘Ã£ thÃªm

### 1. Search vá»›i Gá»£i Ã½ ThÃ´ng Minh (Smart Search Suggestions)

**TÃ¬m kiáº¿m theo:**
- âœ… MÃ£ hÃ³a Ä‘Æ¡n (HD2501001, HD2501002...)
- âœ… TÃªn khÃ¡ch hÃ ng
- âœ… Sá»‘ Ä‘iá»‡n thoáº¡i khÃ¡ch hÃ ng
- âœ… Email khÃ¡ch hÃ ng
- âœ… MÃ´ táº£ sáº£n pháº©m trong hÃ³a Ä‘Æ¡n
- âœ… Ghi chÃº

**Gá»£i Ã½ tá»± Ä‘á»™ng:**
- GÃµ tá»« 2 kÃ½ tá»± trá»Ÿ lÃªn â†’ hiá»‡n gá»£i Ã½
- Gá»£i Ã½ Ä‘Æ°á»£c phÃ¢n loáº¡i:
  - ğŸ“„ **HÃ³a Ä‘Æ¡n**: Click Ä‘á»ƒ xem chi tiáº¿t
  - ğŸ‘¤ **KhÃ¡ch hÃ ng**: Click Ä‘á»ƒ tÃ¬m táº¥t cáº£ Ä‘Æ¡n cá»§a KH
- Hiá»ƒn thá»‹ thÃ´ng tin phá»¥ (sá»‘ tiá»n, sá»‘ Ä‘Æ¡n hÃ ng...)

### 2. Filter CÆ¡ Báº£n

**Row 1:**
- ğŸ” **TÃ¬m kiáº¿m**: Ã” search vá»›i gá»£i Ã½
- ğŸ“Š **Sáº¯p xáº¿p**: Theo ngÃ y bÃ¡n, mÃ£ HD, tá»•ng tiá»n, cÃ´ng ná»£ (tÄƒng/giáº£m dáº§n)

**Row 2:**
- ğŸ“… **Tá»« ngÃ y - Äáº¿n ngÃ y**: Lá»c theo khoáº£ng thá»i gian
- ğŸ’³ **Tráº¡ng thÃ¡i thanh toÃ¡n**: ÄÃ£ TT / TT 1 pháº§n / ChÆ°a TT
- ğŸª **Showroom**: Lá»c theo phÃ²ng trÆ°ng bÃ y
- ğŸ‘¤ **NhÃ¢n viÃªn**: Lá»c theo ngÆ°á»i bÃ¡n

### 3. Filter NÃ¢ng Cao (Advanced Filters)

Click nÃºt **"NÃ¢ng cao"** Ä‘á»ƒ hiá»‡n thÃªm:
- ğŸ’° **Sá»‘ tiá»n tá»« - Ä‘áº¿n**: Lá»c theo khoáº£ng giÃ¡ trá»‹ (VNÄ)
- âš ï¸ **CÃ´ng ná»£**: CÃ³ cÃ´ng ná»£ / KhÃ´ng cÃ´ng ná»£

### 4. Thá»‘ng KÃª Tá»•ng Quan

Hiá»ƒn thá»‹ 4 card thá»‘ng kÃª:
- ğŸ“ˆ **Tá»•ng doanh thu**: Tá»•ng tiá»n cá»§a cÃ¡c Ä‘Æ¡n Ä‘ang hiá»ƒn thá»‹
- ğŸ’µ **ÄÃ£ thu**: Tá»•ng sá»‘ tiá»n Ä‘Ã£ thanh toÃ¡n
- ğŸ”´ **CÃ´ng ná»£**: Tá»•ng sá»‘ tiá»n cÃ²n ná»£
- ğŸ“‹ **Sá»‘ Ä‘Æ¡n hÃ ng**: Tá»•ng sá»‘ hÃ³a Ä‘Æ¡n

### 5. Cá»™t Má»›i Trong Báº£ng

ThÃªm cá»™t **"NhÃ¢n viÃªn"** hiá»ƒn thá»‹ ngÆ°á»i bÃ¡n hÃ ng

## ğŸ¯ CÃ¡ch Sá»­ Dá»¥ng

### TÃ¬m kiáº¿m nhanh:
```
1. GÃµ mÃ£ HD: "HD2501" â†’ Hiá»‡n gá»£i Ã½ cÃ¡c HD
2. GÃµ tÃªn KH: "Nguyá»…n" â†’ Hiá»‡n gá»£i Ã½ KH
3. GÃµ SÄT: "0987" â†’ Hiá»‡n gá»£i Ã½ KH
4. Click vÃ o gá»£i Ã½ Ä‘á»ƒ xem hoáº·c tÃ¬m
```

### Lá»c theo nhiá»u Ä‘iá»u kiá»‡n:
```
1. Chá»n khoáº£ng thá»i gian: 01/01/2025 - 31/01/2025
2. Chá»n tráº¡ng thÃ¡i: "ChÆ°a thanh toÃ¡n"
3. Chá»n showroom: "Showroom Quáº­n 1"
4. Click "Lá»c"
```

### Lá»c nÃ¢ng cao:
```
1. Click "NÃ¢ng cao"
2. Nháº­p sá»‘ tiá»n tá»«: 1000000
3. Nháº­p sá»‘ tiá»n Ä‘áº¿n: 5000000
4. Chá»n "CÃ³ cÃ´ng ná»£"
5. Click "Lá»c"
```

### Sáº¯p xáº¿p:
```
1. Chá»n "Sáº¯p xáº¿p theo": Tá»•ng tiá»n
2. Chá»n: Giáº£m dáº§n
3. Click "Lá»c"
```

## ğŸ”§ API Endpoints

### Search Suggestions:
```
GET /sales/api/search/suggestions?q={query}

Response:
[
  {
    "type": "invoice",
    "icon": "fa-file-invoice",
    "label": "HD2501001",
    "sublabel": "Nguyá»…n VÄƒn A - 2,500,000Ä‘",
    "value": "HD2501001",
    "url": "/sales/1"
  },
  {
    "type": "customer",
    "icon": "fa-user",
    "label": "Nguyá»…n VÄƒn A",
    "sublabel": "0987654321 - 5 Ä‘Æ¡n hÃ ng",
    "value": "Nguyá»…n VÄƒn A",
    "search": "Nguyá»…n VÄƒn A"
  }
]
```

## ğŸ“Š Query Parameters

Táº¥t cáº£ filter Ä‘Æ°á»£c truyá»n qua URL query string:

```
/sales?search=HD2501
      &from_date=2025-01-01
      &to_date=2025-01-31
      &payment_status=unpaid
      &showroom_id=1
      &user_id=2
      &min_amount=1000000
      &max_amount=5000000
      &has_debt=1
      &sort_by=total_vnd
      &sort_order=desc
```

## ğŸ’¡ Tips

1. **TÃ¬m kiáº¿m nhanh**: GÃµ mÃ£ HD hoáº·c tÃªn KH â†’ Enter
2. **XÃ³a filter**: Click nÃºt "XÃ³a lá»c" Ä‘á»ƒ reset táº¥t cáº£
3. **Bookmark**: URL cÃ³ query string â†’ cÃ³ thá»ƒ bookmark
4. **Pagination**: Filter Ä‘Æ°á»£c giá»¯ khi chuyá»ƒn trang
5. **Responsive**: Hoáº¡t Ä‘á»™ng tá»‘t trÃªn mobile

## ğŸ¨ UI/UX Features

- âœ… Autocomplete vá»›i debounce (300ms)
- âœ… Click outside Ä‘á»ƒ Ä‘Ã³ng suggestions
- âœ… Keyboard navigation (sáº¯p tá»›i)
- âœ… Loading states
- âœ… Icon phÃ¢n loáº¡i rÃµ rÃ ng
- âœ… MÃ u sáº¯c theo loáº¡i (invoice=blue, customer=green)
- âœ… Collapsible advanced filters
- âœ… Real-time result count

## ğŸš€ Performance

- Debounce search: 300ms
- Limit suggestions: 5 má»—i loáº¡i
- Pagination: 20 items/page
- Eager loading: customer, showroom, user
- Index database: invoice_code, sale_date

## ğŸ“ Code Structure

```
Controller:
- index(): Main listing vá»›i filters
- searchSuggestions(): API cho autocomplete

View:
- Search input vá»›i suggestions dropdown
- Filter form vá»›i basic + advanced
- Stats cards
- Table vá»›i sorting

JavaScript:
- fetchSuggestions(): Gá»i API
- displaySuggestions(): Render UI
- selectSuggestion(): Handle click
- toggleAdvancedFilters(): Show/hide
```

---

**HoÃ n thÃ nh! Há»‡ thá»‘ng search & filter Ä‘Ã£ sáºµn sÃ ng sá»­ dá»¥ng.** ğŸ‰
